# Mysql

## 精通

### 数据库的三范式是什么？什么是反模式？

第一范式 要求属性具有原子性，不可再分解。
		第二范式，表必须有一个主键，非主键列必须完全依赖于主键，而不能只依赖于主键的一部分，侧重点是完全依赖。比如：两张类型Id和一起当主键的情况。
		第三范式，非主键列必须直接依赖于主键。侧重点是必须直接。比如：关系表里，你不能存个名称
虽然
		三大范式，虽然有减少数据库的空间，更加灵活，减轻维护数据完整性的麻烦的优点。但是这样会导致数据库业务涉及的表变多，涉及到多表查询，影响性能，且不利于分库分表。

有时候出于性能优先考虑，避免多表查询，会统计一张宽表，这就是一种反设计模式。定时修正宽表中的数据，让数据最终一致。

### 说一说Mysql存储引擎？

### 请说说 InnoDB ？



## 熟悉

### Mysql有哪些数据类型？

![image-20200907162253288](https://gitee.com//chenchong0817/picture/raw/master/Aaron/20200907162255.png)

###  MySQL 中 varchar 与 char 的区别？varchar(50) 中的 50 代表的涵义？

char 是一种固定长度的字符串类型，最多放255个字节。而varchar 则是一种可变长度的类型，最多放65535个字符。50代表最多放存放 50 个字符。varchar(50) 和 (200) 存储 hello 所占空间一样，后者在排序时会消耗更多内存。

## 了解

### int(11) 中的 11 代表什么涵义？

int(11) 中的 11 ，不影响字段存储的范围，只影响展示效果。展示时不够，前面补0。

![image-20200907163634131](https://gitee.com//chenchong0817/picture/raw/master/Aaron/20200907163636.png)

### 金额(金钱)相关的数据，选择什么数据类型？

​	使用 decimal 类型，避免精度丢失。如果使用 Java 语言时，需要使用 BigDecimal 进行对应。

### 一张表，里面有 ID 自增主键，当 insert 了 17 条记录之后，删除了第 15,16,17 条记录，再把 MySQL 重启，再 insert 一条记录，这条记录的 ID 是 18 还是 15？

​	InnoDB类型的表 ，把自增主键的最大 ID 记录到内存中，重启会丢失，15
​			MyISAM 类型的表 ，把自增主键的最大 ID 记录到数据文件里面，重启不会丢失，18
​			但业务中一般都是逻辑删除。

### 表中有大字段 X(例如：text 类型)，且字段 X 不会经常更新，以读为为主，请问您是选择拆成子表，还是继续放一起?写出您这样选择的理由

​	拆带来的问题：连接消耗 + 存储拆分空间。
​			不拆可能带来的问题：查询性能
​			出于性能优先的考量，出于性能优先，拆。但最好直接放ES中。

### 为什么 SELECT COUNT(*) FROM table 在 InnoDB 比 MyISAM 慢？

​	在没有 WHERE 条件的情况下
​			InnoDB 是去实时统计结果，会全表扫描
​			而 MyISAM 内部维持了一个计数器，预存了结果，所以直接返回即可。

